# [LeetCode 704ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary Searchï¼‰](https://github.com/lihe/MyLeetcode/issues/6)

https://leetcode.cn/problems/binary-search/



## **ä¸€ã€æ ¸å¿ƒç»“è®º**





> **æœ‰åºæ•°ç»„ + O(log n)**

> ğŸ‘‰ **åªèƒ½ç”¨äºŒåˆ†æŸ¥æ‰¾**



------





## **äºŒã€æ ‡å‡†äºŒåˆ†æŸ¥æ‰¾ï¼ˆæ¨èå†™æ³•ï¼‰**







### **âœ… Python æ­£ç¡®å®ç°ï¼ˆé—­åŒºé—´å†™æ³•ï¼‰**



```python
class Solution:
    def search(self, nums, target):
        left, right = 0, len(nums) - 1

        while left <= right:
            mid = (left + right) // 2

            if nums[mid] == target:
                return mid
            elif nums[mid] < target:
                left = mid + 1
            else:
                right = mid - 1

        return -1
```



------





## **ä¸‰ã€ç”¨ç¤ºä¾‹å®Œæ•´èµ°ä¸€é**







### **ç¤ºä¾‹ 1**



```
nums = [-1,0,3,5,9,12]
target = 9
```

| **left** | **right** | **mid** | **nums[mid]** | **æ“ä½œ**            |
| -------- | --------- | ------- | ------------- | ------------------- |
| 0        | 5         | 2       | 3             | target > 3 â†’ left=3 |
| 3        | 5         | 4       | 9             | å‘½ä¸­ â†’ return 4     |



------





### **ç¤ºä¾‹ 2**



```
nums = [-1,0,3,5,9,12]
target = 2
```

| **left** | **right** | **mid** | **nums[mid]** | **æ“ä½œ**             |
| -------- | --------- | ------- | ------------- | -------------------- |
| 0        | 5         | 2       | 3             | target < 3 â†’ right=1 |
| 0        | 1         | 0       | -1            | target > -1 â†’ left=1 |
| 1        | 1         | 1       | 0             | target > 0 â†’ left=2  |
| 2        | 1         | ç»“æŸ    |               | return -1            |



------





## **å››ã€ä¸ºä»€ä¹ˆæ—¶é—´å¤æ‚åº¦æ˜¯ O(log n)ï¼Ÿ**







### **æ¯ä¸€æ­¥éƒ½åœ¨å¹²ä»€ä¹ˆï¼Ÿ**





- æŠŠæœç´¢åŒºé—´ **ç¼©å°ä¸€åŠ**
- n â†’ n/2 â†’ n/4 â†’ â€¦





æŸ¥æ‰¾æ¬¡æ•°ï¼š



$\log_2 n$



ğŸ‘‰ æ‰€ä»¥æ˜¯ **O(log n)**



------





## **äº”ã€äºŒåˆ†æŸ¥æ‰¾çš„ä¸‰ä¸ªâ€œé“å¾‹â€**







### **1ï¸âƒ£ æ•°ç»„å¿…é¡»æœ‰åº**





ï¼ˆæœ¬é¢˜å·²ä¿è¯ï¼‰



------





### **2ï¸âƒ£ åŒºé—´å®šä¹‰è¦ç»Ÿä¸€**





ä½ è¿™ç‰ˆç”¨çš„æ˜¯ï¼š

```
[left, right]  é—­åŒºé—´
```

æ‰€ä»¥ï¼š



- while ç”¨ <=
- å·¦è¾¹æ”¶ç¼©ï¼šleft = mid + 1
- å³è¾¹æ”¶ç¼©ï¼šright = mid - 1





------





### **3ï¸âƒ£ mid ä¸€å®šè¦è¿™æ ·ç®—**



```
mid = (left + right) // 2
```

ï¼ˆPython ä¸ä¼šæº¢å‡ºï¼Œä½†è¿™æ˜¯æ ‡å‡†å†™æ³•ï¼‰



------





## **å…­ã€å¸¸è§é”™è¯¯ï¼ˆ90% ç¿»è½¦ç‚¹ï¼‰**







### **âŒ é”™è¯¯ 1ï¼šwhile å†™æˆ** 

### **<**



```
while left < right:   # âŒ
```

ğŸ‘‰ ä¼šæ¼æ‰æœ€åä¸€ä¸ªå…ƒç´ 



------





### **âŒ é”™è¯¯ 2ï¼šåŒºé—´æ²¡å¯¹é½**



```
right = mid      # âŒ
```

ğŸ‘‰ å¯èƒ½æ­»å¾ªç¯



------





### **âŒ é”™è¯¯ 3ï¼šå¿˜è®° return -1**





------





## **ä¸ƒã€å¦ä¸€ç§å†™æ³•ï¼ˆå·¦é—­å³å¼€åŒºé—´ï¼Œäº†è§£å³å¯ï¼‰**



```python
class Solution:
    def search(self, nums, target):
        left, right = 0, len(nums)

        while left < right:
            mid = (left + right) // 2
            if nums[mid] == target:
                return mid
            elif nums[mid] < target:
                left = mid + 1
            else:
                right = mid

        return -1
```


------





## **å…«ã€é¢è¯•æ ‡å‡†å›ç­”æ¨¡æ¿**





> è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„äºŒåˆ†æŸ¥æ‰¾é—®é¢˜ã€‚

> å› ä¸ºæ•°ç»„æ˜¯æœ‰åºçš„ï¼Œå¹¶ä¸”è¦æ±‚ O(log n) çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œåœ¨æ¯ä¸€æ­¥æŠŠæœç´¢åŒºé—´ç¼©å°ä¸€åŠï¼Œæœ€ç»ˆæ‰¾åˆ°ç›®æ ‡å€¼æˆ–è¿”å› -1ã€‚



------











# è¿›é˜¶


## **ä¸€ã€é—®é¢˜**





> **æ•°ç»„æœ‰é‡å¤å…ƒç´ **

> è¦æ±‚ï¼š**è¿”å› target ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼ˆæœ€å·¦è¾¹ï¼‰**



è¿™æ˜¯ç»å…¸é—®é¢˜ï¼Œé€šå¸¸å«ï¼š



- **Binary Search â€“ First Occurrence**
- æˆ– **lower_bound çš„ç­‰å€¼ç‰ˆæœ¬**





------





## **äºŒã€æ€è·¯**





> åœ¨æœç´¢åˆ° target ä¹‹å **ä¸ç«‹å³è¿”å›**ï¼Œ

> **è®°å½• mid**ï¼Œç„¶åæŠŠ right å‘å·¦ç§»åŠ¨ä¸€ä½ç»§ç»­æ‰¾




ä½†è¦æ³¨æ„ä¸¤ç‚¹ç»†èŠ‚ï¼š



1. **right ä¸æ˜¯ç®€å•å‡ 1**
2. è€Œæ˜¯ **right = mid - 1**






------





## **ä¸‰ã€æ­£ç¡®çš„â€œæ‰¾ç¬¬ä¸€ä¸ª targetâ€çš„äºŒåˆ†é€»è¾‘**







### **å…³é”®æ€æƒ³ï¼ˆä¸€å¥è¯ï¼‰**





> **å½“ nums[mid] == target æ—¶ï¼Œè¯´æ˜ç­”æ¡ˆåœ¨å·¦ä¾§ï¼ˆåŒ…æ‹¬ midï¼‰ï¼Œ**

> **å…ˆè®°ä¸‹ midï¼Œå†ç»§ç»­å‘å·¦æ”¶ç¼©åŒºé—´ã€‚**



------





## **å››ã€æ ‡å‡†ä»£ç **



```python
class Solution:
    def searchFirst(self, nums, target):
        left, right = 0, len(nums) - 1
        ans = -1  # ç”¨æ¥è®°å½•ç­”æ¡ˆ

        while left <= right:
            mid = (left + right) // 2

            if nums[mid] == target:
                ans = mid              # è®°å½•å½“å‰å‘½ä¸­ä½ç½®
                right = mid - 1        # ç»§ç»­å‘å·¦æ‰¾
            elif nums[mid] < target:
                left = mid + 1
            else:
                right = mid - 1

        return ans
```



------



## **äº”ã€æ‰‹åŠ¨èµ°ä¸€éï¼ˆä½ ä¸€å®šè¦èƒ½èµ°ï¼‰**







### **ç¤ºä¾‹**



```
nums = [1,2,2,2,3,4]
target = 2
```

| **left** | **right** | **mid** | **nums[mid]** | **æ“ä½œ**      | **ans** |
| -------- | --------- | ------- | ------------- | ------------- | ------- |
| 0        | 5         | 2       | 2             | è®°å½•ï¼Œright=1 | 2       |
| 0        | 1         | 0       | 1             | left=1        | 2       |
| 1        | 1         | 1       | 2             | è®°å½•ï¼Œright=0 | 1       |
| 1        | 0         | ç»“æŸ    |               |               | 1       |

âœ… è¿”å› 1ï¼ˆç¬¬ä¸€ä¸ª 2ï¼‰



------





## **å…­ã€å’Œâ€œæ™®é€šäºŒåˆ†â€çš„æœ¬è´¨åŒºåˆ«**







### **æ™®é€šäºŒåˆ†ï¼ˆæ— é‡å¤ï¼‰**



```
if nums[mid] == target:
    return mid
```



------





### **æ‰¾ç¬¬ä¸€ä¸ªï¼ˆæœ‰é‡å¤ï¼‰**



```
if nums[mid] == target:
    ans = mid
    right = mid - 1
```

ğŸ“Œ **åŒºåˆ«åªåœ¨è¿™ä¸€ç‚¹**



------





## **ä¸ƒã€é¢è¯•å®˜æ ‡å‡†å¬æ³•**





> å½“æ•°ç»„ä¸­å­˜åœ¨é‡å¤å…ƒç´ æ—¶ï¼Œå¦‚æœè¦æ±‚è¿”å›ç¬¬ä¸€ä¸ª targetï¼Œåœ¨äºŒåˆ†æŸ¥æ‰¾åˆ° target åä¸èƒ½ç«‹å³è¿”å›ï¼Œè€Œæ˜¯è®°å½•å½“å‰ä½ç½®ï¼Œå¹¶ç»§ç»­åœ¨å·¦åŠåŒºé—´æŸ¥æ‰¾ï¼Œæœ€ç»ˆå¾—åˆ°æœ€å·¦ä¾§çš„ target ä¸‹æ ‡ã€‚



è¿™å¥è¯ **éå¸¸æ ‡å‡†**ã€‚



------





## **å…«ã€é¡ºæ‰‹ç»™ä¸€ä¸ªâ€œå¯¹ç§°ç‰ˆæœ¬â€ï¼ˆæ‰¾æœ€åä¸€ä¸ªï¼‰**





### **æ‰¾æœ€åä¸€ä¸ª targetï¼ˆæœ€å³ï¼‰**



```python
class Solution:
    def searchLast(self, nums, target):
        left, right = 0, len(nums) - 1
        ans = -1

        while left <= right:
            mid = (left + right) // 2

            if nums[mid] == target:
                ans = mid
                left = mid + 1     # å‘å³æ‰¾
            elif nums[mid] < target:
                left = mid + 1
            else:
                right = mid - 1

        return ans
```



------





## **ä¹ã€äºŒåˆ†æŸ¥æ‰¾â€œè¿›é˜¶å£è¯€â€**





> **æ‰¾ç¬¬ä¸€ä¸ªï¼šå‘½ä¸­åå³è¾¹ç•Œå·¦ç§»**

> **æ‰¾æœ€åä¸€ä¸ªï¼šå‘½ä¸­åå·¦è¾¹ç•Œå³ç§»**



------

